include_if: "MACHINE == 'raspi'"

global_config:
  CFLAGS:
    append_words: >
      -ffreestanding
      -I{{ ARM_DIR }}/src
      -I{{ ARM_DIR }}/machines/raspi/include
      -mcpu=arm1176jzf-s -mfloat-abi=soft
  HAL_RUN:
    default: {{ ARM_DIR }}/machines/raspi/run
  HAL_GENIMAGE:
    default: {{ ARM_DIR }}/machines/raspi/genimage
  HAL_LINK:
    default: >
      $(LD) -Map $(BUILD_DIR)/executable.map
      -nostdlib -nodefaultlibs
      -T{{ ARM_DIR }}/machines/raspi/executable.lds
      -o

config:
  LIBS:
    set:
      - '$(shell $(CC) -print-libgcc-file-name)' # XXX

