notifications:
  email:
    on_success: changed
    on_failure: never

sudo: required
language: cpp

env:
  matrix:
    - TARGET=kernel
    - TARGET=fs/fat
    - TARGET=tcpip
    - TARGET=lang/cpp
    - TARGET=interfaces/channel
    - TARGET=interfaces/datetime
    - TARGET=interfaces/exec
    - TARGET=interfaces/fs
    - TARGET=interfaces/hal
    - TARGET=interfaces/io
    - TARGET=interfaces/lang
    - TARGET=interfaces/memory
    - TARGET=interfaces/pager
    - TARGET=interfaces/thread
    - TARGET=interfaces/storage_device
    - TARGET=interfaces/net_device
    - TARGET=interfaces/datetime_device
    - TARGET=resea.net
    - TARGET=SDK
  global:
    - CC=gcc-5
    - CXX=g++-5
    - secure: "cg2XxwTYCzX7JBGW4yJxhkJ1Hq1RboWb5/ytCnLrgf8UyW2CcE0egTvoVOQEX++fRZNMGvU1A66pYloCERLiLI/ETsHbLoMvpY6msKF1615vZpTgX2spFVUcbimcOin2ad3PxghN2vWiFDM/A4xbnBiAQ8QqirVQskXIPHciQTsyPcJPZgcqEfO1BLLkXUqHyNGWGw0vjn6AAucfIZsjCVzQXrhtuOcQbbbEI4AgwyGLXqtzyAmXEEJ3SCmR7Y+Ecu8skV3W73s/4X9j83ziB2FSLtb21vnPd8BdZfsr9FUEa6GzB89F9NdgBaLkhTAWl7+3BvAOM0HE5ebV1P3OrJMWdlnuG0xoJwXQ7mpg7NhaNeJj6kukiV7KYLOd0eiwF7oBP05WcUz19QV5tScnfScAc5G3Kn5vMvk18Z0Pv9JS1c6KcHK6PrirOUwHC7uU1Tm3fPqskp1iFjXigcTm9c8wn53X8idNcUBAxwoa78u41WkDVG3Znk3HIhOdKVv2uRewvCjd1E3RbwwO3+yJouEkf+fxUT0qJ78riVN4dafy3X5VJJAxtkbMK/WNhAikigG5K2KhkcBvhdj2DN5vII8eSNf4t6pPJSahSRb91bmGvWtEV1eilONurGY+opxhTnD41foGavcaqEQdK2xCjcH24nPHcGMO52EXXpCiELE="

services:
  - docker

before_instrall:
  - docker pull ubuntu:16.04

install:
  - docker build -t ci-image -f .travis.dockerfile .

script:
  - docker run -e TARGET -e CC -e CXX -e GH_TOKEN ci-image
